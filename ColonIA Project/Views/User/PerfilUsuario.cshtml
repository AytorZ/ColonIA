@model ColonIA.Models.Usuario

@{
    ViewBag.Title = "PerfilUsuario";
}

<div class="inner">
    <header id="header">
        <h2>Perfil</h2>
    </header>
    <section>
        <div class="card" style="margin-bottom: 1cm;">
            <div class="card-body">
                <div class="d-flex flex-column align-items-center text-center">
                    <img src="https://bootdey.com/img/Content/avatar/avatar7.png" alt="Admin" class="rounded-circle" width="150">
                    <div class="mt-3">
                        <h4>@Model.NombreCompleto</h4>
                        <p class="text-secondary mb-1">
                            Rol:
                            @switch (Model.IdRole)
                            {
                                case 1:
                                    @:Administrador
                                    break;
                                case 2:
                                    @:Supervisor
                                    break;
                                case 3:
                                    @:Operador
                                    break;
                                default:
                                    @: Desconocido
                                    break;
                            }
                        </p>
                        <p class="text-muted font-size-sm">@Model.Direccion</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="card mb-3" style="margin-bottom: 1cm;">
            <div class="card-body">
                <div class="row">
                    <div class="col-sm-3"><h6 class="mb-0">Nombre Completo</h6></div>
                    <div class="col-sm-9 text-secondary">@Model.NombreCompleto</div>
                </div>
                <hr>
                <div class="row">
                    <div class="col-sm-3"><h6 class="mb-0">Correo Electrónico</h6></div>
                    <div class="col-sm-9 text-secondary">@Model.Correo</div>
                </div>
                <hr>
                <div class="row">
                    <div class="col-sm-3"><h6 class="mb-0">Teléfono</h6></div>
                    <div class="col-sm-9 text-secondary">@Model.Telefono</div>
                </div>
                <hr>
                <div class="row">
                    <div class="col-sm-3"><h6 class="mb-0">Contraseña</h6></div>
                    <div class="col-sm-9 text-secondary">
                        @(new string('*', Model.Contrasena?.Length ?? 10))
                    </div>
                </div>

                <hr>
                <div class="row">
                    <div class="col-sm-3"><h6 class="mb-0">Dirección</h6></div>
                    <div class="col-sm-9 text-secondary">@Model.Direccion</div>
                </div>
                <hr>
                <div class="row">
                    <div class="col-sm-12 text-center">
                        <button type="button" class="button primary fit" data-toggle="modal" data-target="#editModal">
                            Editar
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </section>
</div>

<!-- Modal de edición de perfil -->
<div class="modal fade" id="editModal">
    <div class="modal-dialog">
        <div class="modal-content box card">
            <div class="text-center">
                <h2>Editar Información del Perfil</h2>
            </div>
            <form method="post" asp-action="ActualizarPerfil" asp-controller="User">

                <input type="hidden" name="IdUsuario" value="@Model.IdUsuario" />
                <div class="form-group mb-3">
                    <label>Nombre Completo</label>
                    <input type="text" class="form-control" asp-for="NombreCompleto" value="@Model.NombreCompleto" required>
                </div>
                <div class="form-group mb-3">
                    <label>Correo Electrónico</label>
                    <input type="email" class="form-control" asp-for="Correo" value="@Model.Correo" required>
                </div>
                <div class="form-group mb-3">
                    <label>Teléfono</label>
                    <input type="text" class="form-control" asp-for="Telefono" value="@Model.Telefono">
                </div>
                <div class="form-group mb-3">
                    <label>Contraseña</label>
                    <input type="password" class="form-control" asp-for="Contrasena" value="@Model.Contrasena" required>
                </div>
                <div class="form-group mb-3">
                    <label>Dirección</label>
                    <input type="text" class="form-control" asp-for="Direccion" value="@Model.Direccion">
                </div>

                <div class="text-center">
                    <button type="reset" class="button" data-dismiss="modal">Cerrar</button>
                    <button type="submit" class="button primary">Guardar Cambios</button>
                </div>

            </form>
        </div>
    </div>
</div>

<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
